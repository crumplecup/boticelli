# Discord Post Curation Pipeline
# Analyzes potential posts and recommends best for approval
#
# NOTE: Uses skip_content_generation = true to preserve LLM analysis text
# IMPORTANT: Cannot use Jinja templates with skip_content_generation (Botticelli bug)

[narrative]
name = "curate_posts_final"
description = "Analyze potential Discord posts and recommend best for approval"
skip_content_generation = true

[toc]
order = ["analyze"]

[acts.analyze]
model = "gemini-2.5-flash"
temperature = 0.3
max_tokens = 3000

[[acts.analyze.input]]
type = "table"
table_name = "potential_discord_posts"
format = "markdown"
limit = 10
order_by = "generated_at DESC"
required = false

[[acts.analyze.input]]
type = "text"
content = "Analyze the Discord posts from the table. Score each on Engagement, Clarity, Value, Tone, and Polish (1-10 each). Recommend the top 2 posts with highest scores."
