# Publish FAQ Narrative
# Demonstrates: Carousel-generated content, table references, selection, bot publishing

[narrative]
name = "publish_faq"
description = "Generate, select, and publish FAQ content to Discord server"
skip_content_generation = true
model = "gemini-2.5-flash"

[toc]
order = ["generate_content", "select_best", "publish_message"]

# Define nested narrative for content generation
[narratives.generate_content]
narrative = "faq_content_generation"

# Define bot command for publishing
[bots.publish_message]
platform = "discord"
command = "messages.send"
guild_id = "1439415903753076859"
channel_id = "1441256008092483724"  # Update with FAQ channel ID
content = "{{select_best}}"

# Define table reference for loading generated FAQs
[tables.faq_content]
table_name = "faq_content"
limit = 100
format = "markdown"

[acts]
# Act 1: Run FAQ content generation to populate the table
generate_content = ["narratives.generate_content"]

# Act 2: Compile all FAQ questions into a single formatted document
select_best = [
  "tables.faq_content",
  """You are formatting FAQ questions for the Botticelli Discord server.

The table above contains 9 FAQ questions generated iteratively. Your task:
1. Organize all 9 questions into logical categories (Getting Started, Features, Usage, etc.)
2. Format as a single cohesive FAQ document using Discord markdown
3. Add a header: "# ðŸ“š Botticelli FAQ"
4. Use emojis for category headers
5. Ensure proper Discord formatting (code blocks, bold, links)
6. Add a footer: "Need more help? Ask in #support!"

Output ONLY the formatted FAQ document (no explanation, no JSON, just the markdown content).""",
]

# Act 3: Publish to Discord FAQ channel (uses output from select_best)
publish_message = ["bots.publish_message"]
